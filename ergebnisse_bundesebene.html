<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="keywords" content="jQuery Menu, Main Menu, Context Menu, Vertical Menu, Popup Menu, Menu, jqxMenu" /> 
    <meta name="description" content="The jqxMenu widget supports several built-in modes - horizontal, vertical and context menu. In this demo, the mode property is set to 'vertical'."/>
    <title id='Description'>The jqxMenu widget supports several built-in modes - horizontal, vertical and context menu. In this demo, the mode property is set to 'vertical'.
    </title>
    <link rel="stylesheet" href="lib/jqwidgets/styles/jqx.base.css" type="text/css" />
    <script type="text/javascript" src="lib/scripts/gettheme.js"></script>
    <script type="text/javascript" src="lib/scripts/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="lib/jqwidgets/jqxcore.js"></script>
	<script type="text/javascript" src="lib/jqwidgets/jqxdata.js"></script>
	<script type="text/javascript" src="lib/jqwidgets/jqxchart.js"></script>
    <script type="text/javascript" src="lib/jqwidgets/jqxmenu.js"></script>
	
	<!--Static data import!-->
	<script type="text/javascript" src="data/bundeslaender2009.js"></script>
	
</head>
<body>
    <div id='content'>
        <script type="text/javascript">
            $(document).ready(function () {
                var theme = getTheme();
				
				// prepare the data
                var laenderSource =
                {
                    datatype: "json",
                    datafields: [
                        { name: 'id' },
                        { name: 'parentid' },
                        { name: 'text' },
                        { name: 'subMenuWidth' }
                    ],
                    id: 'id',
                    localdata: bundeslaender2009_data
                };

                // create data adapter.
                var bundeslaenderDataAdapter = new $.jqx.dataAdapter(laenderSource);
                // perform Data Binding.
                bundeslaenderDataAdapter.dataBind();
                // get the menu items. The first parameter is the item's id. The second parameter is the parent item's id. The 'items' parameter represents 
                // the sub items collection name. Each jqxTree item has a 'label' property, but in the JSON data, we have a 'text' field. The last parameter 
                // specifies the mapping between the 'text' and 'label' fields.  
                var laenderForBundeslaender = bundeslaenderDataAdapter.getRecordsHierarchy('id', 'parentid', 'items', [{ name: 'text', map: 'label'}]);
                $('#landesEbeneMenu').jqxMenu({ source: laenderForBundeslaender, mode: 'vertical', theme: theme, width: '170' });
				
                var laenderForWahlkreise = bundeslaenderDataAdapter.getRecordsHierarchy('id', 'parentid', 'items', [{ name: 'text', map: 'label'}]);
                $('#wahlkreisEbeneMenu').jqxMenu({ source: laenderForWahlkreise, mode: 'vertical', theme: theme, width: '170' });
				
				
                // Create a jqxMenu
                $("#jqxMenu").jqxMenu({ width: '170', mode: 'vertical', theme: theme });
                $("#jqxMenu").css('visibility', 'visible');
				
				
				var sitzverteilungSource =
				{
					datatype: "csv",
					datafields: [
						{ name: 'Partei' },
						{ name: 'Sitze' }
					],
					url: 'data/sitzverteilung2009.csv'
				};
				
				var dataAdapter = new $.jqx.dataAdapter(sitzverteilungSource, { async: false, autoBind: true, loadError: function (xhr, status, error) { alert('Error loading "' + sitzverteilungSource.url + '" : ' + error); } });
				$.jqx._jqxChart.prototype.colorSchemes.push({ name: 'myScheme', colors: ['#ff0000', '#aaaaaa', '#ffff00', '#ff00ff', '#00ff00', '#00ffff'] });
			  
				// prepare jqxChart settings
				var settings = {
					title: "Sitzverteilung 2009",
					description: "(source: bundeswahlleiter.de)",
					enableAnimations: true,
					showLegend: false,
					legendPosition: { left: 520, top: 140, width: 100, height: 100 },
					padding: { left: 5, top: 5, right: 5, bottom: 5 },
					titlePadding: { left: 0, top: 0, right: 0, bottom: 10 },
					source: dataAdapter,
					colorScheme: 'myScheme',
					seriesGroups:
						[
							{
								type: 'pie',
								showLabels: true,
								series:
									[
										{ 
											dataField: 'Sitze',
											displayText: 'Partei',
											labelRadius: 100,
											initialAngle: 15,
											radius: 130,
											centerOffset: 0,
											formatFunction: function(value) {
												return(value);
											}
										}
									]
							}
						]
				};

				// setup the chart
				$('#pieChartBundesebene').jqxChart(settings);
				
				
            });
        </script>
        <div id='jqxWidget' style='width: 110px;'>
            <div id='jqxMenu' style="visibility: hidden;">
                <ul>
                    <li><a href="menu.htm">fuzzy-robot</a></li>
                    <li>Wahlergebnisse
                        <ul>
                            <li><a href="ergebnisse_bundesebene.html">Bundesebene</a></li>
                            <li>Landesebene
								<ul id='landesEbeneMenu'></ul>
							</li>
                            <li>Wahlkreisebene
								<ul id='wahlkreisEbeneMenu'></ul>
							</li>
                        </ul>
                    </li>
                    <li>Gewählte Personen
                        <ul>
                            <li><a href="#">Alphabetisch</a></li>
                            <li><a href="#">Nach Landeslisten</a></li>
                            <li><a href="#">In Wahlkreisen</a></li>
                            <li><a href="#">Nach Parteien</a></li>
                        </ul>
                    </li>
                    <li>Dateneingabe
                        <ul>
                            <li><a href="#">csv Import</a></li>
                            <li><a href="#">Eingabemaske</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
		
		
		<div id='main'>
			Bundesebene
			<div id='pieChartBundesebene' style="width: 680px; height: 400px; position: relative; left: 0px; top: 0px;"></div>
		</div>
		
		
    </div>
</body>
</html>
